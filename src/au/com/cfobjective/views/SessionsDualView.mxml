<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark" xmlns:components="au.com.cfobjective.components.*"
		title="cf.Objective(ANZ) Sessions" creationComplete="gotoFirstSession()">
		
	<s:layout>
		<s:HorizontalLayout gap="20" />
	</s:layout>
	
	<fx:Script>
		<![CDATA[
			import au.com.cfobjective.events.SessionEvent;
			import au.com.cfobjective.model.Session;
			import au.com.cfobjective.model.Speaker;
			
			import mx.collections.ArrayCollection;
			import mx.events.FlexEvent;
		
			[Bindable] private var session:Session;
			
			protected function sessionChange(event:SessionEvent):void {
				session = event.session;
			}
			
			protected function gotoAbout():void {
				navigator.pushView(AboutView);
			}
			
			protected function gotoFirstSession():void {
				session = (data as ArrayCollection)[0];
			}
			
			public function gotoSpeaker(speaker:Speaker):void {
				navigator.pushView(SpeakerView, speaker);
			}
		]]>
	</fx:Script>
	
	<fx:Declarations>
		<s:MultiDPIBitmapSource id="info" source160dpi="@Embed('assets/icons/info24x24.png')" source240dpi="@Embed('assets/icons/info48x48.png')" source320dpi="@Embed('assets/icons/info64x64.png')" />
		<s:MultiDPIBitmapSource id="speaker" source160dpi="@Embed('assets/icons/speakers24x24.png')" source240dpi="@Embed('assets/icons/speakers48x48.png')" source320dpi="@Embed('assets/icons/speakers64x64.png')" />
	</fx:Declarations>
	
	<s:actionContent>
		<s:Button icon="{info}" click="gotoAbout()" />
		<s:DataGroup dataProvider="{(data as Session).speakers}" width="100%">
			<s:layout>
				<s:VerticalLayout />
			</s:layout>
			
			<s:itemRenderer>
				<fx:Component>
					<s:ItemRenderer autoDrawBackground="false" width="100%">
						<fx:Script>
							<![CDATA[
								import au.com.cfobjective.model.Speaker;
							]]>
						</fx:Script>
						<s:Button icon="{outerDocument.speaker}" click="outerDocument.gotoSpeaker(data as Speaker)" />
					</s:ItemRenderer>
				</fx:Component>
			</s:itemRenderer>
		</s:DataGroup>	</s:actionContent>
	
	<s:viewMenuItems>
		<s:ViewMenuItem label="About" click="gotoAbout()" iconPlacement="left" icon="{info}" />
		<s:ViewMenuItem label="Speaker" click="gotoSpeaker(session.speakers[0])"  enabled="{session != null}" iconPlacement="left" icon="{speaker}" />
	</s:viewMenuItems>

	<components:SessionsDisplay sessions="{data as ArrayCollection}" sessionChange="sessionChange(event)" />
	<components:SessionDisplay session="{session}" />
</s:View>
